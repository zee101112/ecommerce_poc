# Render.com Deployment Guide

This guide will help you deploy your Django e-commerce application to Render.com.

## Prerequisites

- GitHub repository: https://github.com/zee101112/ecommerce_poc
- Render.com account
- GitHub access token: `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`

## Deployment Steps

### 1. Connect GitHub Repository to Render

1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click "New +" and select "Web Service"
3. Connect your GitHub account if not already connected
4. Select the repository: `zee101112/ecommerce_poc`
5. Choose branch: `main`

### 2. Configure Web Service

**Basic Settings:**
- **Name**: `ecommerce-poc` (or your preferred name)
- **Environment**: `Python 3`
- **Region**: Choose closest to your users
- **Branch**: `main`
- **Root Directory**: Leave empty (uses project root)

**Build & Deploy:**
- **Build Command**: `chmod +x build.sh && ./build.sh`
- **Start Command**: `gunicorn ecommerce_poc.wsgi:application --bind 0.0.0.0:$PORT`

**Environment Variables:**
- `SECRET_KEY`: (Auto-generated by Render)
- `DEBUG`: `False`
- `DJANGO_SETTINGS_MODULE`: `ecommerce_poc.settings_production`
- `ALLOWED_HOSTS`: `.render.com`

### 3. Database Setup (Optional)

If you need a PostgreSQL database:

1. In Render Dashboard, click "New +" and select "PostgreSQL"
2. Configure database settings
3. Copy the database URL
4. Add `DATABASE_URL` environment variable to your web service

### 4. Deploy

1. Click "Create Web Service"
2. Render will automatically:
   - Clone your repository
   - Install dependencies
   - Run migrations
   - Create superuser
   - Populate sample data
   - Start the application

### 5. Access Your Application

Once deployed, you'll get a URL like: `https://ecommerce-poc-xyz.onrender.com`

**Admin Access:**
- URL: `https://your-app-url.onrender.com/admin`
- Username: `admin`
- Password: `admin123`

## File Structure for Deployment

The following files have been created/modified for Render deployment:

```
ecommerce_poc/
├── settings_production.py    # Production settings
├── render.yaml              # Render configuration
├── build.sh                 # Build script
├── Procfile                 # Alternative deployment method
├── requirements.txt         # Updated with production dependencies
└── DEPLOYMENT.md           # This guide
```

## Production Dependencies Added

- `psycopg2-binary`: PostgreSQL adapter
- `dj-database-url`: Database URL parsing
- `gunicorn`: WSGI server
- `whitenoise`: Static file serving

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `SECRET_KEY` | Django secret key | Auto-generated |
| `DEBUG` | Debug mode | `False` |
| `DJANGO_SETTINGS_MODULE` | Settings module | `ecommerce_poc.settings_production` |
| `ALLOWED_HOSTS` | Allowed hosts | `.render.com` |
| `DATABASE_URL` | Database connection | (Optional) |

## Troubleshooting

### Common Issues

1. **Build Fails**: Check the build logs in Render dashboard
2. **Static Files Not Loading**: Ensure `collectstatic` runs during build
3. **Database Errors**: Check database configuration and migrations
4. **Permission Denied**: Ensure `build.sh` is executable

### Logs

View application logs in the Render dashboard under your service's "Logs" tab.

### Health Check

The application includes a health check at the root path (`/`) to ensure it's running properly.

## Security Notes

- The production settings include security headers and HTTPS enforcement
- Secret key is auto-generated by Render
- Debug mode is disabled in production
- CSRF and XSS protection are enabled

## Custom Domain (Optional)

To use a custom domain:

1. Add your domain to `ALLOWED_HOSTS` in production settings
2. Configure DNS records in Render dashboard
3. Add `CUSTOM_DOMAIN` environment variable

## Monitoring

Render provides built-in monitoring and logging. Check the dashboard for:
- Application performance
- Error logs
- Resource usage
- Deployment history

## Support

For issues with this deployment:
1. Check Render documentation: https://render.com/docs
2. Review application logs
3. Verify environment variables
4. Check GitHub repository for latest updates
